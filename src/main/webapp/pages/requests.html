<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="../scripts/pageheader.js"></script>
    <script src="../scripts/login.js"></script>
    <script src="../scripts/requests.js"></script>
    <title>TRMS Requests</title>
</head>
<body onload="loadPageHeader(); let user = loggedInUser(); getEmpRequests(0,'');">
    
    <div id="page-header"></div>

    <div class="container-fluid col-md-10">
        <h1 id="page-title" class="display-1">Requests</h1>
        <div id="result-div" class="justify-content-sm-center">
            <div id="edit-request" style="display: none;">
                <div class="modal" id="saveModal" tabindex="-1">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title">Request Save Status</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <p id="save-status-msg"></p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                        </div>
                      </div>
                    </div>
                  </div>

                <h3 id="edit-header">Editing Request as <span id="editRole"></span></h3>
                <div id="request-detail">
                    <div class="row">
                        <div class="col-sm">
                            <label for="reqName" class="form-label">Requestor</label>
                            <input type="text" id="reqName" class="form-control" readonly disabled>
                        </div>
                        <div class="col-sm">
                            <label for="evntID" class="form-label">Event ID</label>
                            <input type="text" id="eventID" class="form-control" readonly disabled>
                        </div>
                        <div class="col-sm">
                            <label for="reqAmount" class="form-label">Reimbursement</label>
                            <input type="text" id="reqAmount" class="form-control" readonly>
                        </div>
                        <div class="col-sm">
                            <label for="reqStatus" class="form-label">Status</label>
                            <input type="text" id="reqStatus" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm">
                            <label for="reqMessage" class="form-label">Comments</label>
                            <input type="text" id="reqMessage" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="row m-2 justify-content-sm-end">
                        <div class="col-2">
                            <button type="button" class="btn btn-light border" onclick="saveEdit()">Save</button>
                        </div>
                        <div class="col-2">
                            <button type="button" class="btn btn-light border" onclick="cancelEdit()">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="request-info">
                <h3>Showing reimbursement requests for <span id="empName"></span>:</h3>
                <table class="m-1 table table-info table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Event Type</th>
                            <th scope="col">Event Name</th>
                            <th scope="col">Event Date</th>
                            <th scope="col">Event Cost</th>
                            <th scope="col">Event Location</th>
                            <th scope="col">Proposed Reimbursement</th>
                            <th scope="col">Request Status</th>
                            <th scope="col">Response Needed</th>
                            <th scope="col">Last Updated</th>
                            <th scope="col">Update</th>
                        </tr>
                    </thead>
                    <tbody id="request-detail-table">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
                <div class="row m-2 justify-content-sm-end">
                    <div class="col-2">
                        <button type="button" class="btn btn-light border" onclick="newRequest()">Create New</button>
                    </div>
                </div>
            </div>
            
            <div id="subRequest-info" class="m-3">
                <div class="row justify-content-center">
                    <div class="col-3 justify-content-center">
                        <button type="button" class="btn btn-primary" onclick="getSubordinateRequests();">Show Subordinate Requests</button>
                    </div>
                    <!-- <div class="col-3 justify-content-center">
                        <button type="button" class="btn btn-primary" onclick="getSubordinateRequests('department');">Department Emps</button>
                    </div>
                    <div class="col-3 justify-content-center">
                        <button type="button" class="btn btn-primary" onclick="getSubordinateRequests('beneficiaries');">Beneficiaries</button>
                    </div> -->
                    
                    
                </div>
                <table class="m-1 table table-info table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Employee Name</th>
                            <th scope="col">Relationship</th>
                            <th scope="col">Pending Requests</th>
                        </tr>
                    </thead>
                    <tbody id="request-summary-table">

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>